accessibility:
  error_sound: true
  sound_notifications: true
  startup_sound: true
  success_sound: true
  voice_feedback: true
  voiceover_control:
    enabled: true
    mode: stop  # Используем Command+F5 для полного переключения VoiceOver
    duck_modes:
      - listening
      - processing
    release_modes:
      - sleeping
    debounce_seconds: 0.25
    stop_repeats: 2
    stop_repeat_delay: 0.05
    use_apple_script_fallback: true
    engage_on_keyboard_events: true
    # Настройки детального логирования для диагностики
    debug_logging: true
    log_osascript_commands: true
    log_voiceover_state: true
app:
  bundle_id: com.nexy.assistant
  debug: false
  name: Nexy
  team_id: 5NKLL2CLB9
  version: 1.71.0
audio:
  bluetooth_policy: auto
  channels: 1
  chunk_size: 1024
  device_manager:
    auto_switch_to_best: true
    auto_switch_to_headphones: true
    cache_timeout: 5.0
    device_priorities:
      airpods: 100
      beats: 95
      bluetooth_headphones: 90
      bluetooth_speakers: 70
      built_in: 20
      microphone: 5
      other: 10
      system_speakers: 40
      usb_audio: 60
      usb_headphones: 85
      virtual_device: 1
    enabled: true
    exclude_virtual_devices: true
    monitoring_interval: 3.0
    switch_cooldown: 2.0
    virtual_device_keywords:
    - blackhole
    - soundflower
    - loopback
    - virtual
    - aggregate
    - multi-output
    - sound source
    - audio hijack
  follow_system_default: false
  format: int16
  preflush_on_switch: false
  retries: 2
  sample_rate: 48000
  switch_delay: 0.5
  timeout: 5.0
  volume_control: true
  volume_fade_duration: 0.3
  volume_fade_steps: 10
  volume_max: 1.0
  volume_min: 0.0
  volume_step: 0.1
  volume_threshold: 0.01
  warmup_delay: 0.1
grpc:
  connection_timeout: 30
  enable_compression: true
  enable_keepalive: true
  keepalive_time: 10
  keepalive_timeout: 3
  keepalive_without_calls: true
  max_connection_idle: 300
  max_connection_age: 3600
  max_connection_age_grace: 5
  max_message_length: 4194304
  max_receive_message_length: 4194304
  max_send_message_length: 4194304
  retry_attempts: 3
  retry_delay: 1.0
  server_host: 127.0.0.1
  server_port: 50051
  use_tls: false
integrations:
  audio_device:
    enabled: true
    priority: 1
  autostart_manager:
    enabled: true
    priority: 12
  grpc_client:
    enabled: true
    priority: 9
    server: local
    aggregate_timeout_sec: 1.5
    request_timeout_sec: 30.0
    max_retries: 3
    retry_delay: 1.0
    use_network_gate: true
  hardware_id:
    enabled: true
    priority: 2
    cache_enabled: true
    cache_file_path: "~/.voice_assistant/hardware_id_cache.json"
    cache_ttl_seconds: 2592000  # 30 дней
    system_profiler_timeout: 5
    validate_uuid_format: true
    fallback_to_random: false
  keyboard:
    key_to_monitor: space
    short_press_threshold: 0.6
    long_press_threshold: 2.0
    event_cooldown: 0.1
    hold_check_interval: 0.03
    debounce_time: 0.02
    backend: auto
  input_processing:
    enabled: true
    priority: 4
    enable_keyboard_monitoring: true
    auto_start: true
  instance_manager:
    enabled: true
    priority: 13
  interrupt_management:
    enabled: true
    priority: 8
  mode_management:
    enabled: true
    priority: 3
  network_manager:
    enabled: true
    priority: 6
  permissions:
    auto_open_preferences: false
    check_interval: 30.0
    enabled: true
    priority: 0
    retry_attempts: 3
    retry_delay: 5.0
    show_instructions: false
    required_permissions:
      - microphone
      - screen_capture
      - network
      - accessibility
      - input_monitoring
  screenshot_capture:
    enabled: true
    priority: 7
  signals:
    enabled: true
    priority: 11
  speech_playback:
    enabled: true
    priority: 10
  tray_controller:
    enabled: true
    priority: 1
  updater:
    enabled: true
    priority: 5
  voice_recognition:
    enabled: true
    priority: 4
    simulate: false  # Отключаем симуляцию - пытаемся использовать реальный микрофон
    timeout_sec: 10.0
    simulate_success_rate: 0.7
    simulate_min_delay_sec: 1.0
    simulate_max_delay_sec: 3.0
logging:
  console_level: INFO
  file_level: DEBUG
  file_path: logs/nexy.log
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
  max_file_size: 10485760
  max_files: 5
  rotation: true
network:
  # Настройки сети используют конфигурацию из секции grpc
  # чтобы избежать дублирования
permissions:
  # Основные разрешения
  microphone:
    enabled: true
    required: true
    description: "Nexy использует микрофон для распознавания речи и голосового управления."
  screen_capture:
    enabled: true
    required: true
    description: "Nexy захватывает содержимое экрана для анализа и помощи пользователю."
  camera:
    enabled: false
    required: false
    description: "Nexy может использовать камеру для анализа окружения."
  network:
    enabled: true
    required: true
    description: "Nexy использует сеть для связи с сервером и обновлений."
  notifications:
    enabled: true
    required: true
    description: "Nexy отправляет уведомления о статусе работы и важных событиях."
  accessibility:
    enabled: true
    required: true
    description: "Nexy использует Accessibility для мониторинга клавиатуры и автоматизации."
  # Настройки разрешений (дублируются в integrations.permissions)
  # Системные настройки
  system_preferences:
    microphone: "x-apple.systempreferences:com.apple.preference.security?Privacy_Microphone"
    screen_capture: "x-apple.systempreferences:com.apple.preference.security?Privacy_ScreenCapture"
    camera: "x-apple.systempreferences:com.apple.preference.security?Privacy_Camera"
    accessibility: "x-apple.systempreferences:com.apple.preference.security?Privacy_Accessibility"
    input_monitoring: "x-apple.systempreferences:com.apple.preference.security?Privacy_ListenEvent"
    notifications: "x-apple.systempreferences:com.apple.preference.notifications"
screenshot_capture:
  auto_capture: false
  capture_delay: 0.1
  capture_format: PNG
  capture_quality: 85
  enabled: true
  max_captures: 10
  save_path: screenshots
  timeout: 5.0
speech_playback:
  audio_device: auto
  enabled: true
  fade_in_duration: 0.1
  fade_out_duration: 0.1
  max_queue_size: 5
  playback_speed: 1.0
  volume: 0.8
tray:
  icon_active: assets/icons/active.png
  icon_inactive: assets/icons/off.png
  menu_items:
  - action: quit
    label: Выход
    separator: true
  - action: settings
    label: Настройки
  - action: about
    label: О программе
  - action: status
    label: Статус
  show_notifications: true
  tooltip: Nexy AI Assistant
updater:
  appcast_url: https://nexy.ai/appcast.xml
  auto_check: true
  auto_install: false
  check_interval: 3600
  enabled: true
  install_after_download: false
  silent_mode: true
  update_channel: stable
voice_recognition:
  enabled: true
  language: ru-RU
  max_alternatives: 3
  phrase_timeout: 0.3
  silence_timeout: 0.8
  simulate: false
  timeout: 5.0
  use_google: true
  wake_word: nexy
welcome_message:
  enabled: true
  text: "Hi! Nexy is here. How can I help you?"
  audio_file: "assets/audio/welcome_en.mp3"
  fallback_to_tts: true
  delay_sec: 1.5
  volume: 0.8
  voice: "en-US-JennyNeural"
  sample_rate: 48000
  channels: 1
  bit_depth: 16
