# üöÄ GLOBAL DELIVERY PLAN ‚Äî Nexy AI Assistant (macOS)

## üéØ –¶–µ–ª—å
–ï–¥–∏–Ω—ã–π –ø–ª–∞–Ω –¥–≤–∏–∂–µ–Ω–∏—è –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ü–µ–ø—Ç–∞ —Å —Ç—Ä–µ–º—è —Ä–µ–∂–∏–º–∞–º–∏ (SLEEPING / LISTENING / PROCESSING), —É–ø–∞–∫–æ–≤–∫–æ–π –≤ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π –∏ –Ω–æ—Ç–∞—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π PKG, –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ (Sparkle) –∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–º —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ –Ω–∞ Azure (–±–µ–∑ Docker/CI).

- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã: EventBus, —Ç–æ–Ω–∫–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ –º–æ–¥—É–ª–µ–π), –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –ª–∏—à—å –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç.
- –†–µ–∂–∏–º—ã: —Ç–æ–ª—å–∫–æ 3 (S/L/P). –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ ‚Äî –ø–æ–¥—ç—Ç–∞–ø –≤–Ω—É—Ç—Ä–∏ PROCESSING.
- –î–∏—Å—Ç—Ä–∏–±—É—Ü–∏—è: —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç ‚Äî –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π/–Ω–æ—Ç–∞—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π PKG + `appcast.xml` –Ω–∞ Azure.

---

## üß≠ –û–±–∑–æ—Ä —ç—Ç–∞–ø–æ–≤
1) –≠—Ç–∞–ø 1 ‚Äî –ö–ª–∏–µ–Ω—Ç: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ UX (S/L/P)
2) –≠—Ç–∞–ø 2 ‚Äî –ü–æ—Å—Ç–∞–≤–∫–∞: PKG + –ø–æ–¥–ø–∏—Å—å/–Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è + Sparkle
3) –≠—Ç–∞–ø 3 ‚Äî –°–µ—Ä–≤–µ—Ä: Azure (–±–µ–∑ Docker/CI) + —Ö–æ—Å—Ç–∏–Ω–≥ AppCast/PKG

–ö–∞–∂–¥—ã–π —ç—Ç–∞–ø —Ä–∞–∑–±–∏—Ç –Ω–∞ –º–∏–Ω–∏‚Äë—Ü–∏–∫–ª—ã —Å —Ü–µ–ª—å—é, –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –∏ —Ç–µ—Å—Ç‚Äë–≥–µ–π—Ç–æ–º (–∫—Ä–∏—Ç–µ—Ä–∏–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏).

---

## 1) –ö–ª–∏–µ–Ω—Ç: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ UX (S/L/P)
**–¶–µ–ª—å**: —Å—Ç–∞–±–∏–ª—å–Ω—ã–π UX –∏ –ø–æ–ª–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ü–∏–∫–ª S‚ÜíL‚ÜíP‚ÜíS.

Œî 2025‚Äë09‚Äë18 ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω end‚Äëto‚Äëend –ø–æ—Ç–æ–∫: LISTENING ‚Üí PROCESSING ‚Üí –∑–∞—Ö–≤–∞—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ ‚Üí gRPC ‚Üí –ø—Ä–∏—ë–º –∞—É–¥–∏–æ —á–∞–Ω–∫–æ–≤ ‚Üí –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ SLEEPING
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –≤–æ–∑–≤—Ä–∞—Ç –≤ SLEEPING –ø–æ–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∞–π–º–∞—É—Ç–æ–º PROCESSING ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ `grpc.request_completed`/`end_message` –∏–ª–∏ `playback.completed`
 - –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å Signals (audio/visual cues): –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–æ–≤—ã—Ö entitlements; –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è PKG/–ø–æ–¥–ø–∏—Å–∏/–Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏; –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ AudioSink + SignalIntegration

- 1.1 Tray —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è
  - –î–µ–π—Å—Ç–≤–∏—è: –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ `app.mode_changed` –∏ `voice.mic_opened/closed`; –∏–Ω–¥–∏–∫–∞—Ü–∏—è S/L/P; —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞; –ø–æ–∑–∂–µ ‚Äî `network.status_changed`.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: —Å–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤ —Ç—Ä–µ–µ.

- 1.2 Permissions —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è
  - –î–µ–π—Å—Ç–≤–∏—è: –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ; –ø—É–±–ª–∏–∫–∞—Ü–∏—è `permission.*`; –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏/–æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π ‚Äî –≤–∏–¥–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏; —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ ‚Äî —Å–æ–±—ã—Ç–∏–µ `permission.all_granted`.

- 1.3 InputProcessing —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è
  - –î–µ–π—Å—Ç–≤–∏—è: `long_press`‚ÜíLISTENING; `release`‚ÜíPROCESSING; `short_press`/–æ—à–∏–±–∫–∞‚ÜíSLEEPING; –¥–µ–±–∞—É–Ω—Å/–∞–Ω—Ç–∏‚Äë–¥—Ä–µ–±–µ–∑–≥.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –Ω–∞–¥—ë–∂–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –±–µ–∑ –≥–æ–Ω–æ–∫.

- 1.4 Update Manager (—Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º)
  - –î–µ–π—Å—Ç–≤–∏—è: —Ñ–æ–Ω–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞; –±–µ–∑ UI‚Äë–¥–∏–∞–ª–æ–≥–æ–≤; –ª–æ–≥ —Å—Ç–∞—Ç—É—Å–∞.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞; –±–µ–∑ –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω.

- 1.5 NetworkManagerIntegration
  - –î–µ–π—Å—Ç–≤–∏—è: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π `NetworkManager` (TCP/53), –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, —Å–Ω–∞–ø—à–æ—Ç –Ω–∞ `app.startup`; tray tooltip —Å–µ—Ç–∏.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: off/on —Å–µ—Ç–∏ ‚Üí —Å–æ–±—ã—Ç–∏—è `network.status_changed`, tray –æ—Ç—Ä–∞–∂–∞–µ—Ç.

- 1.6 AudioDeviceIntegration
  - –î–µ–π—Å—Ç–≤–∏—è: –≤—ã–±–æ—Ä/–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è –∑–∞–ø–∏—Å–∏). –§–∏–∑–∏—á–µ—Å–∫–∏–π –∑–∞—Ö–≤–∞—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç VoiceRecognitionIntegration.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–Ω–∞–ø—à–æ—Ç/–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤; –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ¬´already running¬ª.

- 1.7 InterruptManagementIntegration
  - –î–µ–π—Å—Ç–≤–∏—è: `short_press`/–æ—à–∏–±–∫–∞/timeout ‚Üí –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –≤ SLEEPING; –æ—Å—Ç–∞–Ω–æ–≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∏–∑ LISTENING/PROCESSING –≤—Å–µ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

- 1.8 VoiceRecognitionIntegration (LISTENING)
  - –î–µ–π—Å—Ç–≤–∏—è: LONG_PRESS ‚Üí `voice.recording_start` ‚Üí —Ä–µ–∞–ª—å–Ω–æ–µ `start_listening()`; RELEASE ‚Üí `voice.recording_stop` (UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `voice.mic_closed`), –∑–∞—Ç–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç (`voice.recognition_completed/failed`). –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–∞–ø (SHORT_PRESS) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ SLEEPING –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: —Ä–µ–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç; —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ; –Ω–µ—Ç –¥—É–±–ª–µ–π.

- 1.9 ScreenshotCaptureIntegration (PROCESSING)
  - –î–µ–π—Å—Ç–≤–∏—è: –∑–∞—Ö–≤–∞—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –ø–æ —Å–æ–±—ã—Ç–∏—é `voice.recording_stop` (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –≤ PROCESSING); –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞; –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: —Å–∫—Ä–∏–Ω –ø–æ–ª—É—á–µ–Ω; –æ—Ç–∫–∞–∑ ‚Äî —Å–æ–±—ã—Ç–∏–µ –æ—à–∏–±–∫–∏.

- 1.10 GrpcClientIntegration (PROCESSING)
  - –î–µ–π—Å—Ç–≤–∏—è: –æ—Ç–ø—Ä–∞–≤–∫–∞ (—Ç–µ–∫—Å—Ç+—Å–∫—Ä–∏–Ω+HWID) –Ω–∞ —Å–µ—Ä–≤–µ—Ä; —Ä–µ—Ç—Ä–∞–∏/backoff –∑–∞–≤–∏—Å—è—Ç –æ—Ç `network`.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç; –ø—Ä–∏ `DISCONNECTED` ‚Äî –Ω–µ —Å–ø–∞–º–∏—Ç –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.

 - 1.11 SpeechPlaybackIntegration (–≤–Ω—É—Ç—Ä–∏ PROCESSING) ‚Äî –±–∞–∑–æ–≤–∞—è
  - –î–µ–π—Å—Ç–≤–∏—è: –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞; –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø—É–±–ª–∏–∫—É–µ—Ç `playback.completed` (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ PROCESSING).
  - –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è: –ù–ï –≤–Ω–µ–¥—Ä—è–µ–º –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –æ—Ç–º–µ–Ω).
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –∞—É–¥–∏–æ –¥–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è –¥–æ –∫–æ–Ω—Ü–∞; –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ SLEEPING –ø–æ —Å–æ–±—ã—Ç–∏—é.

 - 1.11b SpeechPlaybackInterrupts ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
  - –î–µ–π—Å—Ç–≤–∏—è: `interrupt.request{scope: playback|all}` –∏ `keyboard.short_press` –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –ø–ª–µ–µ—Ä ‚Üí `playback.cancelled` ‚Üí (–≤—Ä–µ–º.) `processing.complete`.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ SLEEPING; –Ω–µ—Ç –≥–æ–Ω–æ–∫.

- 1.12 FSM + Workflows (3 —Ñ–∞–π–ª–∞) + –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
  - –î–µ–π—Å—Ç–≤–∏—è: —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã/—Ç–∞–π–º–∞—É—Ç—ã/–∞–Ω—Ç–∏‚Äë–≥–æ–Ω–∫–∏; –≤–Ω–µ–¥—Ä–∏—Ç—å `sleeping_workflow.py`, `listening_workflow.py`, `processing_workflow.py` (–ø–æ–¥—ç—Ç–∞–ø—ã: capture‚Üígrpc‚Üíplayback) —Å –µ–¥–∏–Ω—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π.
  - –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞): –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `interrupt.request{scope: voice|capture|grpc|playback|all, priority, interrupt_id, deadline_ms, reason}` –∏ `interrupt.completed{interrupt_id, result}`; –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—á–∫–∏ –æ—Ç–º–µ–Ω—ã –≤ –∫–∞–∂–¥—ã–π –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å; —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –≤ SLEEPING —á–µ—Ä–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –Ω–µ—Ç –≥–æ–Ω–æ–∫; —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ–º/—Ç–∞–π–º–∞—É—Ç–∞–º–∏ –≤–æ –≤—Å–µ—Ö —Å—Ç–∞–¥–∏—è—Ö S/L/P.

**Exit‚Äë–∫—Ä–∏—Ç–µ—Ä–∏–π –≠—Ç–∞–ø–∞ 1**: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª S‚ÜíL‚ÜíP‚ÜíS –ø—Ä–æ—Ö–æ–¥–∏—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ; –ª–æ–≥–∏–∫–∞ —á–µ—Ä–µ–∑ EventBus; –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ç–æ–Ω–∫–∏–µ; –ª–æ–≥–∏ –±–µ–∑ PII.

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (–¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞)
1) ScreenshotCaptureIntegration ‚Üí `screenshot.captured|error`
2) GrpcClientIntegration ‚Üí `grpc.request_*`
3) SpeechPlaybackIntegration (–±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π)
4) SpeechPlaybackInterrupts (–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –¥–ª—è –ø–ª–µ–µ—Ä–∞)
5) –§–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è `listening_workflow.py` –∏ `processing_workflow.py`
6) –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ InterruptManagementIntegration (interrupt_id, –¥–µ–¥–ª–∞–π–Ω—ã, –¥–µ–¥—É–ø)

---

## 2) –ü–æ—Å—Ç–∞–≤–∫–∞: PKG + –ø–æ–¥–ø–∏—Å—å/–Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è + Sparkle
**–¶–µ–ª—å**: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ PKG –∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å Azure.

- 2.1 –°–±–æ—Ä–∫–∞ .app (—Å–º. PACKAGING_PLAN.md)
  - –î–µ–π—Å—Ç–≤–∏—è: PyInstaller (.spec) ‚Üí `.app`; `entitlements.plist` (Mic, Screen Recording, Notifications, Accessibility).
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: `.app` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ.

- 2.2 –ü–æ–¥–ø–∏—Å—å .app (—Å–º. PACKAGING_PLAN.md)
  - –î–µ–π—Å—Ç–≤–∏—è: `codesign` (Developer ID Application, hardened runtime, entitlements).
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: `codesign --verify --deep --strict` OK.

- 2.3 –°–±–æ—Ä–∫–∞ –∏ –ø–æ–¥–ø–∏—Å—å PKG (—Å–º. PACKAGING_PLAN.md)
  - –î–µ–π—Å—Ç–≤–∏—è: `productbuild` ‚Üí `.pkg`; `productsign` (Developer ID Installer).
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –ª–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ PKG –ø—Ä–æ—Ö–æ–¥–∏—Ç.

- 2.4 –ù–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ staple (—Å–º. PACKAGING_PLAN.md)
  - –î–µ–π—Å—Ç–≤–∏—è: `notarytool submit --wait` –¥–ª—è `.pkg`; `stapler staple`.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ PKG –Ω–∞ —á–∏—Å—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ Gatekeeper –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π.

- 2.5 –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏ Sparkle (—Å–º. PACKAGING_PLAN.md)
  - –î–µ–π—Å—Ç–≤–∏—è: –∑–∞–≥—Ä—É–∑–∏—Ç—å `.pkg` –∏ `appcast.xml` –≤ Azure Blob Static Website –∏–ª–∏ App Service; –æ–±–Ω–æ–≤–∏—Ç—å `appcast_url` –≤ –∫–ª–∏–µ–Ω—Ç–µ; silent‚Äë—Ä–µ–∂–∏–º.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –∫–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –∏ —Å—Ç–∞–≤–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å Azure –±–µ–∑ –¥–∏–∞–ª–æ–≥–æ–≤.

**Exit‚Äë–∫—Ä–∏—Ç–µ—Ä–∏–π –≠—Ç–∞–ø–∞ 2**: PKG –ø–æ–¥–ø–∏—Å–∞–Ω/–Ω–æ—Ç–∞—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω/—Å—Ç–µ–ø–ª–µ–Ω; –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS; Sparkle –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

---

## 3) –°–µ—Ä–≤–µ—Ä: Azure (–±–µ–∑ Docker/CI) + AppCast/PKG —Ö–æ—Å—Ç–∏–Ω–≥
**–¶–µ–ª—å**: gRPC endpoint (TLS/HTTP2) –∏ —Ö–æ—Å—Ç–∏–Ω–≥ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.

- 3.1 –î–µ–ø–ª–æ–π —Å–µ—Ä–≤–µ—Ä–∞
  - –î–µ–π—Å—Ç–≤–∏—è: Azure App Service (Python) –∏–ª–∏ VM (Ubuntu); –¥–æ—Å—Ç–∞–≤–∫–∞ –∫–æ–¥–∞ ZIP/–∏–∑ GitHub; `pip install -r requirements.txt`; –∑–∞–ø—É—Å–∫ `grpc_server.py` (HTTP/2, TLS); –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `config.env` ‚Üí App Settings.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: `/health`/gRPC health ‚ÄúServing‚Äù.

- 3.2 –î–æ–º–µ–Ω –∏ HTTPS
  - –î–µ–π—Å—Ç–≤–∏—è: `api.<domain>`; –≤–∫–ª—é—á–∏—Ç—å HTTPS –∏ HTTP/2; –≤–∞–ª–∏–¥–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: TLS –ø—Ä–æ–≤–µ—Ä–∫–∞ OK, h2 –∞–∫—Ç–∏–≤–µ–Ω.

- 3.3 –•–æ—Å—Ç–∏–Ω–≥ AppCast/PKG
  - –î–µ–π—Å—Ç–≤–∏—è: `appcast.xml` –∏ `.pkg` –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ HTTPS; –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏/–≤–µ—Ä—Å–∏–∏.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: Sparkle —á–∏—Ç–∞–µ—Ç `appcast.xml` –∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç PKG.

- 3.4 E2E —Å –∫–ª–∏–µ–Ω—Ç–æ–º
  - –î–µ–π—Å—Ç–≤–∏—è: –ø—Ä–æ–ø–∏—Å–∞—Ç—å `grpc_host/port` –≤ –∫–ª–∏–µ–Ω—Ç–µ; –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π PROCESSING —Ü–∏–∫–ª.
  - –¢–µ—Å—Ç‚Äë–≥–µ–π—Ç: –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç Azure, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ SLEEPING.

**Exit‚Äë–∫—Ä–∏—Ç–µ—Ä–∏–π –≠—Ç–∞–ø–∞ 3**: –ü—Ä–æ–¥–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω; –∫–ª–∏–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç end‚Äëto‚Äëend; –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å Azure.

---

## üîÅ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–æ—Ä—è–¥–æ–∫
- –≠—Ç–∞–ø 1 ‚Üí –≠—Ç–∞–ø 2 ‚Üí –≠—Ç–∞–ø 3. –≠—Ç–∞–ø 2 –º–æ–∂–Ω–æ –≥–æ—Ç–æ–≤–∏—Ç—å –∫ –∫–æ–Ω—Ü—É –≠—Ç–∞–ø–∞ 1 (—Å–∫—Ä–∏–ø—Ç—ã –ø–æ–¥–ø–∏—Å–∏/–Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏). –≠—Ç–∞–ø 3 –º–æ–∂–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ 1.9‚Äì1.11.

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥, –ª–æ–≥–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ö–æ–Ω—Ñ–∏–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞: `client/config/*.yaml` ‚Äî `grpc_host`, `grpc_port`, `appcast_url`, —Ç–∞–π–º–∞—É—Ç—ã, —Ä–µ—Ç—Ä–∞–∏, backoff.
- –õ–æ–≥–∏: –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, —É—Ä–æ–≤–Ω–∏ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º; –±–µ–∑ PII; –∫–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è (—Ä–µ–∂–∏–º—ã/—Å–µ—Ç—å/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è).
- –†–∞–∑—Ä–µ—à–µ–Ω–∏—è/Entitlements: Mic, Screen Recording, Notifications, Accessibility, Network ‚Äî —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã —Å `permissions`.
- –°–µ–∫—Ä–µ—Ç—ã: Apple (–ø–æ–¥–ø–∏—Å—å/–Ω–æ—Ç–∞—Ä–∏–∑–∞—Ü–∏—è) ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ/–≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ; Azure ‚Äî App Settings/Key Vault.

---

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (—Å–≤–æ–¥–Ω–æ)
- –ì–æ—Ç–æ–≤–æ: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∫–∞—Ä–∫–∞—Å; –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ tray/permissions/input/update (—Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º).
- –í —Ä–∞–±–æ—Ç–µ: –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ UX‚Äë–∏–Ω–¥–∏–∫–∞—Ü–∏–∏; –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏/PKG/Azure.
- –î–∞–ª–µ–µ: NetworkManagerIntegration ‚Üí Audio/Interrupts ‚Üí –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–æ–Ω—Ç—É—Ä ‚Üí PKG ‚Üí Azure.

---

## üìå –ú–∏–Ω–∏‚Äë–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å–ø–∏—Å–∫–∏ (–ø—Ä–∏–º–µ—Ä)
- –ö–ª–∏–µ–Ω—Ç/–°–µ—Ç—å: off/on ‚Üí `network.status_changed`, tray –æ—Ç—Ä–∞–∂–∞–µ—Ç.
- –ì–æ–ª–æ—Å–æ–≤–æ–π —Ü–∏–∫–ª: S‚ÜíL‚ÜíP‚ÜíS ‚Äî –±–µ–∑ –≥–æ–Ω–æ–∫; —Ä–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã.
- PKG: `codesign`/`productbuild`/`productsign`/`notarytool`/`stapler` ‚Äî –≤—Å–µ OK.
- Azure: health ‚ÄúServing‚Äù; TLS/HTTP2 –≤–∫–ª—é—á–µ–Ω—ã; `appcast.xml`/PKG –ø–æ HTTPS.

---

## üóÇ –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- `client/Docs/INTEGRATION_MASTER_PLAN.md` ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
- `client/Docs/PRODUCT_CONCEPT.md` ‚Äî UX –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏.
- (Auth/Chat ‚Äî –æ—Ç–ª–æ–∂–µ–Ω–æ; –ø–ª–∞–Ω —É–¥–∞–ª—ë–Ω –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- `client/PACKAGING_README.md`, `PACKAGING_README.md`, `PRODUCTION_BUILD_GUIDE.md` ‚Äî —É–ø–∞–∫–æ–≤–∫–∞.
- `AZURE_SETUP.md` ‚Äî –∑–∞–º–µ—Ç–∫–∏ –ø–æ Azure (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç—å).

---

## ‚òÅÔ∏è Azure VM ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —á–µ–∫‚Äë–ª–∏—Å—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞

### –¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∏–∑ –ø–æ—Ä—Ç–∞–ª–∞ Azure)
- **Resource group**: Nexy
- **Region**: Canada Central
- **VM OS**: Linux
- **Size**: Standard D2s v3 (2 vCPUs, 8 GiB)
- **Public IP (primary NIC)**: 20.151.51.172
- **VNet/Subnet**: nexy-vnet/default
- **DNS name**: Not configured (–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∏–∂–µ)
- **Subscription**: Azure subscription 1
- **Subscription ID**: 6d225f4c-756c-41ff-b361-62f248a60a2d
- **Status**: Stopped (deallocated) ‚Äî –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–æ—Å–æ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –±–µ–∑ Docker/CI
1) –°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
   - –ó–∞–∫—Ä–µ–ø–∏—Ç—å Public IP –∫–∞–∫ Static.
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS‚Äë–∏–º—è –¥–ª—è IP (–Ω–∞–ø—Ä–∏–º–µ—Ä, `api.yourdomain.com`).
   - –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç—ã: 22 (–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥ –≤–∞—à IP), 80 (HTTP, –¥–ª—è certbot), 443 (HTTPS, HTTP/2).
   - –í–∫–ª—é—á–∏—Ç—å UFW/NSG –ø—Ä–∞–≤–∏–ª–∞, –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å/–∑–∞–∫—Ä—ã—Ç—å 22.
2) –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
   - –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `nexy`; –æ–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–∞–∫–µ—Ç–æ–≤.
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: `python3.11`, `python3.11-venv`, `nginx`, `certbot`, `python3-certbot-nginx`.
3) –î–æ—Å—Ç–∞–≤–∫–∞ –∫–æ–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞ (`server/`)
   - –í–∞—Ä–∏–∞–Ω—Ç A: `scp` –∞—Ä—Ö–∏–≤–∞ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã ‚Üí `~nexy/app/server/`.
   - –í–∞—Ä–∏–∞–Ω—Ç B: `curl -L -o release.zip` –∏–∑ GitHub Releases ‚Üí —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å.
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å `config.env` –ø–æ `server/config.env.example`.
   - –°–æ–∑–¥–∞—Ç—å venv –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `python -m venv .venv && source .venv/bin/activate && pip install -r requirements.txt`.
4) –°–µ—Ä–≤–∏—Å gRPC
   - systemd unit `nexy-grpc.service` (—Å–ª—É—à–∞–µ—Ç `127.0.0.1:50051`, HTTP/2):
     - ExecStart: `/home/nexy/app/server/.venv/bin/python grpc_server.py --host 127.0.0.1 --port 50051`
     - Restart=always, WantedBy=multi-user.target
5) Nginx + TLS + —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
   - –í—ã–¥–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: `sudo certbot --nginx -d api.yourdomain.com`.
   - Nginx 443: `listen 443 ssl http2;` –∏ –ø—Ä–æ–∫—Å–∏ `grpc_pass grpc://127.0.0.1:50051;`.
   - –ü–∞–ø–∫–∞ –¥–ª—è AppCast/PKG: `/var/www/nexy/appcast/`.
   - –†–∞–∑–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø–æ `https://api.yourdomain.com/updates/` (alias –Ω–∞ –ø–∞–ø–∫—É –≤—ã—à–µ).
6) AppCast/PKG
   - –†–∞–∑–º–µ—Å—Ç–∏—Ç—å `appcast.xml` –∏ `Nexy-x.y.z.pkg` –≤ `/var/www/nexy/appcast/`.
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: `https://api.yourdomain.com/updates/appcast.xml`.
7) –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏
   - `client/config/app_config.yaml` / `network_config.yaml`:
     - `grpc_host: api.yourdomain.com`, `grpc_port: 443`, `use_tls: true`.
     - `appcast_url: https://api.yourdomain.com/updates/appcast.xml`.
     - (–ü–ª–∞–Ω) `auth.enabled: true` ‚Äî –∫–ª–∏–µ–Ω—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç `authorization: Bearer <token>` –≤ metadata –≤—Å–µ—Ö RPC.
8) –ü—Ä–æ–≤–µ—Ä–∫–∏
   - `systemctl status nexy-grpc` ‚Äî –∞–∫—Ç–∏–≤–µ–Ω; `nginx -t` ‚Äî OK; certbot ‚Äî –≤–∞–ª–∏–¥–Ω—ã–π cert.
   - –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π S‚ÜíL‚ÜíP‚ÜíS —Ä–∞–±–æ—Ç–∞–µ—Ç; Sparkle —Ç—è–Ω–µ—Ç –∞–ø–¥–µ–π—Ç —Å `appcast.xml`.

### –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- –î–æ–º–µ–Ω (A/AAAA –∫ 20.151.51.172): `api.yourdomain.com`
- Email –¥–ª—è Certbot: `admin@yourdomain.com`
- –ü—É—Ç–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ AppCast/PKG: `/var/www/nexy/appcast/`
- –í–µ—Ä—Å–∏–∏ —Ä–µ–ª–∏–∑–æ–≤ –∏ —Å—Å—ã–ª–∫–∏ –≤–Ω—É—Ç—Ä–∏ `appcast.xml`

---

## üîê –ü–æ–¥–ø–∏—Å—å –∏ –Ω–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

### –î–∞–Ω–Ω—ã–µ (–Ω–µ—Å–µ–∫—Ä–µ—Ç–Ω—ã–µ ‚Äî —Ñ–∏–∫—Å–∏—Ä—É–µ–º –≤ –ø–ª–∞–Ω–µ)
- Apple ID (email): seregawpn@gmail.com
- Team ID (App ID Prefix): 5NKLL2CLB9
- Bundle ID (explicit): com.nexy.assistant
- –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã: iOS, iPadOS, macOS, tvOS, watchOS, visionOS
- –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: Nexy

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: App‚ÄëSpecific Password –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –¢–û–õ–¨–ö–û –ª–æ–∫–∞–ª—å–Ω–æ –≤ Keychain, –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

### –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã ‚Äî –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Ç–æ—á–Ω—ã–µ –∏–º–µ–Ω–∞ –∏–∑ Keychain)
- Developer ID Application: "Developer ID Application: <Your Name> (5NKLL2CLB9)"
- Developer ID Installer:  "Developer ID Installer: <Your Name> (5NKLL2CLB9)"

–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:
```bash
security find-identity -p codesigning -v | cat
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ notarytool (–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ App‚ÄëSpecific Password)
–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Keychain –ø–æ–¥ –ø—Ä–æ—Ñ–∏–ª–µ–º `nexy-notary` (–ø–∞—Ä–æ–ª—å –≤–≤–æ–¥–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ git):
```bash
xcrun notarytool store-credentials nexy-notary \
  --apple-id seregawpn@gmail.com \
  --team-id 5NKLL2CLB9 \
  --keychain-profile nexy-notary
```

–ù–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ñ–∏–ª—è:
```bash
xcrun notarytool submit Nexy-signed.pkg --keychain-profile nexy-notary --wait
xcrun stapler staple Nexy-signed.pkg
```

### –ü–æ–¥–ø–∏—Å—å .app –∏ .pkg (—à–∞–±–ª–æ–Ω –∫–æ–º–∞–Ω–¥)
```bash
# –ü–æ–¥–ø–∏—Å—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (.app)
codesign --deep --force --options runtime \
  --entitlements client/entitlements.plist \
  --sign "Developer ID Application: <Your Name> (5NKLL2CLB9)" Nexy.app

# –°–±–æ—Ä–∫–∞ –∏ –ø–æ–¥–ø–∏—Å—å –∏–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä–∞ (.pkg)
productbuild --component Nexy.app /Applications Nexy.pkg
productsign --sign "Developer ID Installer: <Your Name> (5NKLL2CLB9)" Nexy.pkg Nexy-signed.pkg

# –ù–æ—Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Å—Ç–µ–ø–ª–∏–Ω–≥
xcrun notarytool submit Nexy-signed.pkg --keychain-profile nexy-notary --wait
xcrun stapler staple Nexy-signed.pkg
```

### Sparkle (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
- –ö–ª—é—á–∏ Sparkle (EdDSA): —Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –ª–æ–∫–∞–ª—å–Ω–æ/–≤ secret‚Äë—Ö—Ä–∞–Ω–∏–ª–∏—â–µ; –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
- `appcast.xml`: —Ä–∞–∑–º–µ—â–∞–µ–º –Ω–∞ Azure (—Å–º. —Ä–∞–∑–¥–µ–ª Azure VM). –°—Å—ã–ª–∫–∏ –Ω–∞ `.pkg` –ø–æ HTTPS.

### –ö–æ–Ω—Ñ–∏–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞ (–ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–º—É —Ä–µ–ª–∏–∑—É)
- `client/config/app_config.yaml`:
  - `appcast_url: https://api.<domain>.com/updates/appcast.xml`
- `client/config/network_config.yaml`:
  - `grpc_host: api.<domain>.com`, `grpc_port: 443`, `use_tls: true`

### –ü–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å App‚ÄëSpecific Password, .p12 –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ Sparkle –≤ git.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å macOS Keychain –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–∞–º.
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å macOS –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –ø–æ–¥–ø–∏—Å–∏.

---

## ‚ö†Ô∏è –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É)

> –í–ù–ò–ú–ê–ù–ò–ï: —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ macOS Keychain/—Å–µ–∫—Ä–µ—Ç‚Äë—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞.

- Apple ID (email): seregawpn@gmail.com
- Team ID: 5NKLL2CLB9
- Bundle ID: com.nexy.assistant
- App‚ÄëSpecific Password: qtiv-kabm-idno-qmbl

> –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ notarytool/CI —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 
> 1) –†–û–¢–ò–†–û–í–ê–¢–¨ App‚ÄëSpecific Password –≤ Apple ID.
> 2) –£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ (–ø–ª–∞–Ω)
- –¢–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ macOS Keychain
- gRPC –≤—ã–∑–æ–≤—ã —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—Ç—Å—è `metadata.authorization: Bearer <token>`
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π CLI‚Äë—á–∞—Ç –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–∞ (–æ—Ç–ª–æ–∂–µ–Ω–æ)
